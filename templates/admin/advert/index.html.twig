{% extends 'admin/base.html.twig' %}

{% block title %}Administration des annonces!{% endblock %}

{% block body %}
<div class="container-fluid text-center">
    <h1 class="my-2">Gestion des annonces</h1>
    <table class="table table-hover">
        <thead>
            <tr>
                <th>Id</th>
                <th>Date d'ajout</th>
                <th>Titre</th>
                <th>Auteur</th>
                <th>Réservations</th>
                <th>Note</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for advert in adverts %}
            <tr>
                <td>{{ advert.id }}</td>
                <td>{{advert.createdAt | date('d/m/Y à H:i') }}</td>
                <td>{{ advert.title }}</td>
                <td>
                    <img src="{{ advert.author.avatarUrl }}"
                         alt="Avatar de {{ advert.author.fullName }}"
                         class="rounded-circle avatar-small"
                    >
                    {{ advert.author.fullName }}
                </td>
                <td>
                    <span class="badge badge-primary rounded py-1 px-3">
                        {{ advert.bookings | length }}
                    </span>
                </td>
                <td>
                    <span class="badge badge-primary rounded py-1 px-3">
                        {{ advert.averageRating |number_format(1,',', ' ') }}
                    </span>
                </td>
                <td>
                    <a href="{{ path('advert_show', {'slug': advert.slug, 'id': advert.id}) }}">
                        <i class="fas fa-eye  mr-2" style="font-size: 1.5em"></i>
                    </a>
                    <a href="{{ path('admin_advert_edit', {'slug': advert.slug, 'id': advert.id}) }}" title="éditer l'annonce">
                       <i class="fas fa-edit mr-2" style="font-size: 1.5em"></i>
                    </a>
                    <a href="{{ path('admin_advert_edit', {'slug': advert.slug, 'id': advert.id}) }}" title="supprimer l'annonce">
                        <i class="fas fa-trash" style="font-size: 1.5em; color: red"></i>
                    </a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="6" class="text-center">Aucune annonce rétrouvée</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
